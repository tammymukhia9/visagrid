

<div class="container col-sm-12">
          <div class="col-sm-3 col-md-3">
            <div class="panel panel-default">
               <div class="panel-heading">
                    <h3 class="panel-title">Check your VISA requirements</h3>
                </div>
              <div class="panel-body">
                    <div class="form-group">
                      <%= form_tag pages_mainsearch_path, :method => 'get' do %>
                      <p>Nationality: <%= select_tag :nationality_id,  options_for_select(Country.all.collect{|a| ["#{a.country_name}", a.id]}, params[:search] )%>
                      <br/>
                      Source: <%= select_tag :source_id,
                                      options_for_select(Country.all.collect{|a| ["#{a.country_name}", a.id]}, params[:search] )%>
                      <br/>
                       Destination: <%= select_tag :destination_id,
                                      options_for_select(Country.all.collect{|a| ["#{a.country_name}", a.id]}, params[:search] )%>
                       <br/>
                       Visit purpose: <%= select_tag :visit_purpose_id,
                                      options_for_select(VisitPurpose.all.collect {|a| ["#{a.visit_name}", a.id]}, params[:search] )%>
                      </p><br/>
                      <%= submit_tag "Search" %>
                       <% end %>

                    </div>
              </div>
            </div>
          </div> 

      



        <div class="col-sm-9 col-md-9">
        
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Results</h3>
                </div>


                <div class="panel-body">
                    <div class="form-group">
                    <p id="notice"><%= notice %></p>

                  

                    <!-- <table>
                      <thead>
                        <tr>
                          <th scope = "col">Visa info</th>
                          <th scope="col">Links</th>
                          <th class="w-25">Source</th>
                          <th class="w-25">Destination</th>
                          <th class="w-25">Nationality</th>
                          <th class="w-25">Visit purpose</th>
                          <th colspan="3"></th>
                        </tr>
                      </thead>

                      <tbody>
                        <% @visa_infos.each do |visa_info| %>
                          <tr>
                            <td><%= visa_info.visa_info %></td>
                            <td><%= visa_info.links %></td>
                            <td><%= (visa_info.source.try(:country_name) || "NA") %></td>
                            <td><%= (visa_info.destination.try(:country_name) || "NA") %></td>
                            <td><%= (visa_info.nationality.try(:country_name) || "NA") %></td>
                            <td><%= (visa_info.visit_purpose.try(:visit_name) || "NA") %></td>

                          </tr>
                        <% end %>
                      </tbody>
                    </table> -->
                    
                       <% @visa_infos.each do |visa_info| %>
                        <% if visa_info.required%>
                     
                      
                       <p>Citizens of <%= (visa_info.nationality.try(:country_name) || "NA") %> <em>require </em><%= (visa_info.visit_purpose.try(:visit_name) || "NA") %> when traveling from <%= (visa_info.destination.try(:country_name) || "NA") %> to <%= (visa_info.source.try(:country_name) || "NA") %></p>
                      <br>
                      <td><%= visa_info.visa_info %></td>
                      <td><%= visa_info.links %></td>
                      <% else %>
                     <p>Citizens of <%= (visa_info.nationality.try(:country_name) || "NA") %><em> do not require </em><%= (visa_info.visit_purpose.try(:visit_name) || "NA") %> when traveling from <%= (visa_info.destination.try(:country_name) || "NA") %> to <%= (visa_info.source.try(:country_name) || "NA") %></p>
                     <br>
                     <td><%= visa_info.visa_info %></td>
                     <td><%= visa_info.links %></td>

                    <% end %>
                    
                   <% end %>
                    </div>

                </div>
                      
          
        </div>
    
</div>